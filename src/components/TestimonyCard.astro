---
const { testimony } = Astro.props;

if (!testimony || !testimony.data) {
	throw new Error('No se recibió un testimonio válido en TestimonyCard');
}

const { image, author, body } = testimony.data;
---

<div
	class="testimonies-carousel__item border-accent flex h-auto min-w-[340px] flex-col gap-[1rem] rounded border-[0.375rem] p-[1rem] text-center shadow-lg md:min-w-[400px] xl:min-w-[500px]"
>
	<div
		class="flex items-center justify-between gap-[1rem] rounded transition-transform duration-500 ease-in-out"
	>
		{
			image ? (
				<picture>
					<source srcset={image} type="image/webp" />
					<img
						src={image}
						alt={`Foto de perfil de ${author}`}
						class="rounded-[50%] object-cover"
						width={96}
						height={96}
						loading="lazy"
						decoding="async"
					/>
				</picture>
			) : (
				<div class="flex h-full w-full items-center justify-center bg-gray-200 text-gray-500">
					Sin imagen
				</div>
			)
		}
		<h2 class="title text-neutral-700">{author}</h2>
		<div class="h-[96px] w-[96px]"></div>
	</div>

	<div>
		<p class="main">{body}</p>
	</div>
</div>

<style>
	.testimonies-carousel__item.focused {
		transform: scale(1.2);
		z-index: 1;
		transition: transform 0.3s ease;
	}
</style>
